{"version":3,"sources":["./src/app/command-center/views/tabs/command-center-emergency/command-center-emergency.page.html","./src/app/command-center/views/tabs/command-center-emergency/command-center-emergency-routing.module.ts","./src/app/command-center/views/tabs/command-center-emergency/command-center-emergency.page.scss","./src/app/command-center/views/tabs/command-center-emergency/command-center-emergency.module.ts","./src/app/command-center/views/tabs/command-center-emergency/command-center-emergency.page.ts"],"names":[],"mappings":"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","file":"tabs-command-center-emergency-command-center-emergency-module.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>command-center-emergency</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <div *ngIf=\\\"valid\\\">\\r\\n    <div class=\\\"flex flex-col items-center justify-items-center p-20\\\">\\r\\n      <p\\r\\n        class=\\\"\\r\\n          mt-2\\r\\n          text-3xl\\r\\n          leading-8\\r\\n          font-extrabold\\r\\n          tracking-tight\\r\\n          text-gray-900\\r\\n          sm:text-4xl\\r\\n        \\\"\\r\\n      >\\r\\n        {{timer}}\\r\\n      </p>\\r\\n      <p\\r\\n        class=\\\"\\r\\n          mt-2\\r\\n          text-3xl\\r\\n          leading-8\\r\\n          font-medium\\r\\n          tracking-tight\\r\\n          text-gray-900\\r\\n          sm:text-4xl\\r\\n        \\\"\\r\\n      >\\r\\n        seconds have been elapsed since the start of Emergency\\r\\n      </p>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"flex flex-col items-center justify-items-center p-20\\\">\\r\\n    <button\\r\\n      (click)=\\\"startEmergency()\\\"\\r\\n      class=\\\"\\r\\n        inline-flex\\r\\n        items-center\\r\\n        justify-center\\r\\n        border border-transparent\\r\\n        text-2xl\\r\\n        font-bold\\r\\n        text-white\\r\\n        bg-red-600\\r\\n        hover:bg-red-500\\r\\n        mt-10\\r\\n        rounded-full\\r\\n        h-48\\r\\n        w-48\\r\\n      \\\"\\r\\n    >\\r\\n      START EMERGENCY\\r\\n    </button>\\r\\n\\r\\n    <button\\r\\n      (click)=\\\"stopEmergency()\\\"\\r\\n      class=\\\"\\r\\n        inline-flex\\r\\n        items-center\\r\\n        justify-center\\r\\n        border border-transparent\\r\\n        text-2xl\\r\\n        font-bold\\r\\n        text-white\\r\\n        bg-green-600\\r\\n        hover:bg-green-500\\r\\n        mt-20\\r\\n        rounded-full\\r\\n        h-48\\r\\n        w-48\\r\\n      \\\"\\r\\n    >\\r\\n      STOP EMERGENCY\\r\\n    </button>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { CommandCenterEmergencyPage } from './command-center-emergency.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: CommandCenterEmergencyPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class CommandCenterEmergencyPageRoutingModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJjb21tYW5kLWNlbnRlci1lbWVyZ2VuY3kucGFnZS5zY3NzIn0= */\";","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { CommandCenterEmergencyPageRoutingModule } from './command-center-emergency-routing.module';\r\n\r\nimport { CommandCenterEmergencyPage } from './command-center-emergency.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    CommandCenterEmergencyPageRoutingModule\r\n  ],\r\n  declarations: [CommandCenterEmergencyPage]\r\n})\r\nexport class CommandCenterEmergencyPageModule {}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { interval } from 'rxjs';\r\nimport { environment } from 'src/environments/environment';\r\n@Component({\r\n  selector: 'app-command-center-emergency',\r\n  templateUrl: './command-center-emergency.page.html',\r\n  styleUrls: ['./command-center-emergency.page.scss'],\r\n})\r\nexport class CommandCenterEmergencyPage implements OnInit {\r\n  timer = 0;\r\n  valid = false;\r\n  constructor(private http: HttpClient, private afs: AngularFirestore) {}\r\n\r\n  async ngOnInit() {\r\n    interval(1000).subscribe(async (x) => {\r\n      const time: any = new Date().getTime() / 1000;\r\n      const start: any = await this.fireGet();\r\n      console.log(time);\r\n      console.log(start.timer.seconds);\r\n      const diff = time - start.timer.seconds;\r\n      this.timer = Math.round(diff);\r\n    });\r\n    // const x: any = await this.fireGet();\r\n    // console.log(x.timer.seconds);\r\n  }\r\n  async startEmergency() {\r\n    this.valid = true;\r\n    console.log('EM');\r\n    await this.http\r\n      .post(\r\n        'https://fcm.googleapis.com/fcm/send',\r\n        {\r\n          to: environment.FCMToken,\r\n          notification: {\r\n            body: 'Body of Your Notification',\r\n            title: 'Title of Your Notification',\r\n          },\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: environment.AuthToken,\r\n            'Content-Type': 'application/json',\r\n          },\r\n        }\r\n      )\r\n      .toPromise();\r\n    this.fireCreate({ timer: new Date() });\r\n  }\r\n\r\n  fireCreate(data) {\r\n    return new Promise<any>((resolve, reject) => {\r\n      this.afs\r\n        .collection('timer')\r\n        .doc('timer')\r\n        .set(data)\r\n        .then(\r\n          (res) => {},\r\n          (err) => reject(err)\r\n        );\r\n    });\r\n  }\r\n\r\n  async fireGet() {\r\n    return await (\r\n      await this.afs.collection('timer').doc('timer').get().toPromise()\r\n    ).data();\r\n  }\r\n  async stopEmergency() {\r\n    this.valid = false;\r\n    return new Promise<any>((resolve, reject) => {\r\n      this.afs\r\n        .collection('timer')\r\n        .doc('timer')\r\n        .set({})\r\n        .then(\r\n          (res) => {},\r\n          (err) => reject(err)\r\n        );\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}