<ion-header>
  <ion-toolbar>
    <ion-title>ERT Chat</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="overflow-y-auto ml-10 mr-10 mt-5 mb-5">
    <!-- <div class="form-group">
      <input #senderUid placeholder="Enter sender ID" type="text" value="sam" />

      <button
        (click)="handleSubmitClick(senderUid.value)"
        class="
          ml-5
          bg-white
          py-2
          px-3
          border border-gray-300
          rounded-md
          shadow-sm
          text-sm
          leading-4
          font-medium
          text-gray-700
          hover:bg-gray-50
          focus:outline-none
          focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500
        "
      >
        Submit
      </button>
    </div> -->

    <div *ngIf="chat.messageObs" class="border border-gray-300 mb-4 rounded-lg">
      <div
        class="
          container
          bg-blue-500
          flex
          items-center
          text-white text-sm
          font-bold
          px-4
          py-3
          relative
        "
        role="alert"
      >
        <p>Chatting with Employee Aayush</p>
      </div>
      <ul class="mt-20 mb-16">
        <li *ngFor="let msg of chat.messageObs | async" class="flow-root">
          <div
            *ngIf="
              msg.sender == chat.senderName;
              then sentMessage;
              else receivedMessage
            "
          ></div>

          <ng-template #sentMessage>
            <div
              class="bg-green-300 float-right max-w-xs mx-4 my-1 p-2 rounded-lg"
            >
              {{ msg.content }}
            </div>
          </ng-template>

          <ng-template #receivedMessage>
            <div
              class="bg-gray-300 float-left max-w-xs mx-4 my-1 p-2 rounded-lg"
            >
              {{ msg.content }}
            </div>
          </ng-template>
        </li>
      </ul>
    </div>

    <form class="form-group" class="flex" #msgInput>
      <input
        #messageInput
        placeholder="Enter Message"
        type="text"
        class="
          rounded-lg
          border-transparent
          flex-1
          appearance-none
          border border-gray-300
          w-full
          py-2
          px-4
          bg-white
          text-gray-700
          placeholder-gray-400
          shadow-sm
          text-base
          focus:outline-none
          focus:ring-2 focus:ring-purple-600
          focus:border-transparent
          mr-4
        "
      />

      <button
        type="submit"
        (click)="sendChatMessage(messageInput.value)"
        class="
          justify-center
          py-2
          px-4
          border border-transparent
          shadow-sm
          text-sm
          font-medium
          rounded-md
          text-white
          bg-indigo-600
          hover:bg-indigo-700
          focus:outline-none
          focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500
        "
      >
        Send
      </button>
    </form>
  </div>
</ion-content>
